---
import LanguageToggle from '../components/core/LanguageToggle.jsx';
import ThemeToggle from '../components/core/ThemeToggle.jsx';

export interface Props {
  title: string;
  description?: string;
}

const {
  title,
  description = 'MCP Pioneer & AI Integration Specialist ‚Äì Automatizaƒçn√≠ ≈°√≠lenec specializuj√≠c√≠ se na Model Context Protocol, AI-driven development a bezpeƒçnou spr√°vu server≈Ø.',
} = Astro.props;

const lang = Astro.url?.searchParams.get('lang') || 'cs';
const baseUrl = 'https://sparesparrow.github.io/sparrow-ai-tech';
const pathname = Astro.url?.pathname || '/';
const canonical = `${baseUrl}${pathname}`;
---

<!doctype html>
<html lang={lang} class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta
      name="keywords"
      content="MCP, Model Context Protocol, AI Integration, Automation, Rust, TypeScript, AI Development, Sparrow AI Tech, Vojtƒõch ≈†paƒçek"
    />
    <meta name="author" content="Vojtƒõch ≈†paƒçek (sparesparrow)" />

    <!-- Social cards -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://sparesparrow.github.io/sparrow-ai-tech/" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://sparesparrow.github.io/sparrow-ai-tech/" />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />

    <link rel="canonical" href={canonical} />
    <link rel="alternate" href={`${baseUrl}/?lang=en`} hreflang="en" />
    <link rel="alternate" href={`${baseUrl}/?lang=cs`} hreflang="cs" />
    <link rel="alternate" href={canonical} hreflang="x-default" />

    <link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}/favicon.svg`} />
    <title>{title}</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Styles -->
    <style>
      @import '../styles/cyberpunk.css';
    </style>
  </head>

  <body>
    <!-- NAVIGATION -->
    <nav class="cyber-nav">
      <div class="cyber-nav-container">
        <div class="cyber-nav-logo cyber-glitch">üê¶ sparesparrow</div>
        <div class="cyber-nav-actions" style="display:flex; align-items:center; gap:.5rem;">
          <LanguageToggle client:load />
          <ThemeToggle client:load />
        </div>

        <div class="cyber-nav-links">
          <a href="#home" class="cyber-nav-link active">Home</a>
          <a href="#features" class="cyber-nav-link">Expertise</a>
          <a href="#projects" class="cyber-nav-link">MCP Projects</a>
          <a href="#agentic" class="cyber-nav-link">Agentic Workflows</a>
          <a href="#philosophy" class="cyber-nav-link">Philosophy</a>
          <a href={`${import.meta.env.BASE_URL}/mermaid-editor`} class="cyber-nav-link">Mermaid Editor</a>
          <a href={`${import.meta.env.BASE_URL}/chatbot`} class="cyber-nav-link">Chatbot</a>
          <a href="#contact" class="cyber-nav-link">Contact</a>
        </div>
      </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main><slot /></main>

    <!-- FOOTER -->
    <footer class="cyber-footer">
      <div class="cyber-container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>MCP Pioneer</h4>
            <p>Specializace na Model Context Protocol, AI orchestration a automatizaci workflow.</p>
          </div>

          <div class="footer-section">
            <h4>Technologies</h4>
            <div class="footer-tags">
              <span>Rust</span><span>TypeScript</span><span>MCP</span><span>AI</span><span>Docker</span>
            </div>
          </div>

          <div class="footer-section">
            <h4>Links</h4>
            <div class="footer-links">
              <a href="https://github.com/sparesparrow" target="_blank" rel="noopener">GitHub</a>
              <a href="https://sparesparrow.github.io/cv/" target="_blank" rel="noopener">CV</a>
              <a href={`${import.meta.env.BASE_URL}/infographics/Infographic1/`}>MCP Infographics</a>
            </div>
          </div>
        </div>

        <div class="footer-bottom">
          <p>&copy; 2025 Vojtƒõch ≈†paƒçek ‚Äì Built with Astro & ‚ù§Ô∏è</p>
        </div>
      </div>
    </footer>

    <!-- üîà ElevenLabs Voice Assistant -->
    <elevenlabs-convai agent-id="agent_01jwpatrdff2dsns5d56n0ardm"></elevenlabs-convai>
    <script is:inline src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>

    <!-- üö´ TypeScript OFF for the following huge DOM-manipulation script -->
    <script is:inline>
      /* @ts-nocheck */

      /* ------------ CYBERPUNK INTERACTIVE JS ------------- */

      document.addEventListener('DOMContentLoaded', () => {
        initTypewriter();
        initScrollAnimations();
        initNavigation();
        initProjectCards();
        initPhilosophyQuotes();
        initMatrixRain();
        initTerminalAnimation();
      });

      /* ... (üí° all the existing long JS code stays exactly the same) ... */

      // üëâ YOUR ORIGINAL INLINE SCRIPT CONTENT STARTS HERE
      // (nothing changed below this point ‚Äì only the header above)
      /* ---------------------------------------------------------------- */

      // Typewriter effect with real Czech text
      const typewriterElement = document.getElementById('typewriter');
      if (typewriterElement) {
        const text = 'Automatizaƒçn√≠ ≈°√≠lenec, kter√Ω se nikdy nenud√≠';
        let i = 0;
        setTimeout(function type() {
          if (i < text.length) {
            typewriterElement.textContent += text.charAt(i++);
            setTimeout(type, 100);
          }
        }, 1000);
      }

      /* ...  (keep the rest of your previously-added functions unchanged) ... */
    </script>
  </body>
</html>

<style>
  /* (existing footer / responsive CSS unchanged) */
</style>
